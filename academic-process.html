<!DOCTYPE html>
<html>
  <head>
    <title>Pharo Book</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="shortcut icon" href="images/favicon.png" type="image/x-icon" />
<link href="/Rapport-Pillar/_support/html/css/font-awesome.min.css" rel="stylesheet">
<link href="/Rapport-Pillar/_support/html/css/nucleus.css" rel="stylesheet">
<link href="/Rapport-Pillar/_support/html/css/flex.css" rel="stylesheet">
<link rel="stylesheet" href="/Rapport-Pillar/_support/html/highlightjs/styles/default.css">
<link rel="stylesheet" href="/Rapport-Pillar/_support/html/css/highlight-commands.css">
<link rel="stylesheet" href="/Rapport-Pillar/_support/html/css/bootstrap.min.css">
<script src="/Rapport-Pillar/_support/html/js/jquery-2.x.min.js"></script>
<script src="/Rapport-Pillar/_support/html/highlightjs/highlight.pack.js"></script>
<script src="/Rapport-Pillar/_support/html/js/highlight-commands.js"></script>
<meta name="description" content="">
<meta name="author" content="Biyalou-Sama Asbathou">
  </head>
  <body>
    <header>
  <div class="logo">
    <a class="baselink" href="/Rapport-Pillar">Pharo Book</a>
  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
  
</header>
<article>
  <aside>
    <ul class="menu">
   		<li data-nav-id="123" class="dd-item">
    		<a href="/Rapport-Pillar">
		       <i class="fa fa-fw fa-home"></i>
	    	</a>
        </li>

		
		  <li class="dd-item ">
			<div>
			  <a href="/Rapport-Pillar/index.html#introduction">
					Introduction
			  </a>
			  
			</div>
			  <ul class="dd-item">
				
			  </ul>
		  
		  </li>
		
		  <li class="dd-item  haschildren ">
			<div>
			  <a href="/Rapport-Pillar/Chapters/contexte.html#contexte">
					Contexte
			  </a>
			   <i class="fa fa-angle-right fa-lg category-icon"></i> 
			</div>
			  <ul class="dd-item">
				
		   	  	<li class="dd-item ">
					<div>
						<a href="/Rapport-Pillar/Chapters/contexte.html#présentation générale">
							Présentation générale
						</a>
						
					</div>

					<ul class="dd-item">
					
					</ul>						
				</li>
				
		   	  	<li class="dd-item ">
					<div>
						<a href="/Rapport-Pillar/Chapters/contexte.html#centre inria lille - nord europe">
							Centre Inria Lille - Nord Europe
						</a>
						
					</div>

					<ul class="dd-item">
					
					</ul>						
				</li>
				
		   	  	<li class="dd-item ">
					<div>
						<a href="/Rapport-Pillar/Chapters/contexte.html#equipe-projet rmod">
							Equipe-projet RMoD
						</a>
						
					</div>

					<ul class="dd-item">
					
					</ul>						
				</li>
				
		   	  	<li class="dd-item ">
					<div>
						<a href="/Rapport-Pillar/Chapters/contexte.html#projet">
							Projet
						</a>
						
					</div>

					<ul class="dd-item">
					
					</ul>						
				</li>
				
			  </ul>
		  
		  </li>
		
		  <li class="dd-item ">
			<div>
			  <a href="/Rapport-Pillar/Chapters/contribution.html#contribution">
					Contribution
			  </a>
			  
			</div>
			  <ul class="dd-item">
				
			  </ul>
		  
		  </li>
		
		  <li class="dd-item ">
			<div>
			  <a href="/Rapport-Pillar/Chapters/conclusion.html#conclusion">
					Conclusion
			  </a>
			  
			</div>
			  <ul class="dd-item">
				
			  </ul>
		  
		  </li>
		
		  <li class="dd-item ">
			<div>
			  <a href="/Rapport-Pillar/Chapters/bilan.html#bilan">
					Bilan
			  </a>
			  
			</div>
			  <ul class="dd-item">
				
			  </ul>
		  
		  </li>
		
    </ul>
  </aside>

  <section class="page">
    
	<h1>Amélioration des processus de génération de documents avec l'outil Pillar</h1>
		
	<p>
This tutorial shows how to put into place a personal website using pillar, and automatically deploy it using github pages and travis.
</p>
<h2>Setting up the environment</h2>

<p>
This tutorial requires the development version of pillar that can be found in the <code>feature/server-command</code> branch.
To install this version, you will need to clone pillar, check out that branch and then proceed with a normal pillar installation, as follows:
</p>
<figure><pre><code class="bash"># Clone and build pillar
$ git clone git@github.com:samakhov/pillar.git -b feature/server-command
$ cd pillar
$ ./scripts/build.sh

# install pillar in your home and update your bashrc
$ mv build ~/.pillar
$ echo 'export PATH=&quot;$PATH:~/.pillar&quot;' &gt;&gt; ~/.bashrc </code></pre><figcaption></figcaption></figure>


<p>
For the following sections, we need to have a GitHub account. So check <a href="https://services.github.com/on-demand/intro-to-github/create-github-account">here</a> if you do not have
a GitHub account.
</p>

<h2>Setup your GitHub repository</h2>

<p>
Now we are going to create a repository on GitHub for our website.
</p>
<ol><li>In the upper-right corner of any page, click <strong>+</strong>, and then click <strong>New repository</strong> as: </li>
</ol>
<p>
<img src="new.png" alt=""/>
</p><ol><li>Type a name for your repository. For example, &quot;myProject&quot;.</li>
<li>Optionaly, add a description of your repository like &quot;My personal web site&quot; </li>
<li>According to informations which will be on your website, you have to chose between &quot;Private&quot; and &quot;Public&quot;</li>
<li>Select <strong>Initialize this repository with a README</strong>.</li>
<li>Add .gitignore by selecting Smalltalk as default language.</li>
<li>Now click <strong>Create repository</strong>.</li>
</ol>

<p>
Your GitHub repository is now created.
</p>


<h2>Create your pillar website</h2>

<p>
After the installation, we can proceed to create a new site in a fresh directory.
We will install the <code>academic</code> archetype and then run a local server.
This should work out of the box in your local machine, however, you will need to change the <code>baseurl</code> setting in the <code>pillar.conf</code> file to correctly render in github pages.
</p>
<figure><pre><code># On a new terminal, so the new bashrc settings are taken
$ git clone https://github.com/myAccount/myProject &amp;&amp; cd myProject
$ pillar archetype academic
$ pillar build html
$ pillar serve -w &amp;</code></pre><figcaption></figcaption></figure>

<p>
Then we will have a skelon site available on <code>localhost:8080</code>.
If you want to change the port, you can use the <code>-p</code> parameter as in: 
</p>
<figure><pre><code>$ pillar serve -p xxxx -w &amp;</code></pre><figcaption></figcaption></figure>

<p>
Put a screenshot of the raw website.
</p>
<h2>Editing your site</h2>

<p>
Put an example of how to change the contents, link to the pillar syntax, maybe put a screenshot with your final result
</p>
<p>
<code>toc.pillar</code> contains the hierarchy of menu.
</p>

<h2>Publish It on GitHub pages</h2>

<p>
If you want to host your site on GitHub, GitHub provides a free subdomain for their users.
So if you already have a GitHub account named <code>myAccount</code> you can have a site for your project <code>myProject</code> into <strong>http://myAccount.github.io/myProject</strong>.
We can already generate our pillar website automatically by calling pillar, and we can now also deploy our website in GitHub pages using travis.
Travis is a continuous integration service that will execute several scripts every time a new commit/branch/pull request is pushed into our repository.
This way, on every commit we can build our site and push our html to our website.
</p>
<p>
To use travis we need to
</p><ol><li>activate travis as a service on your Github repository (maybe put a screenshot or link)</li>
<li>Create a <code>.travis.yml</code> file in the root of your site with the following content</li>
</ol>

<figure><pre><code>language: smalltalk

os:
    - linux

smalltalk:
    - Pharo-6.1

install:
    # Pillar installation
    - git clone https://github.com/pillar-markup/pillar.git .pillar -b dev-7  # Clone pillar
    - cd .pillar &amp;&amp; ./scripts/build.sh &amp;&amp; cd ..

script:
    - .pillar/build/pillar build html
    - cd _result/html &amp;&amp; touch .nojekyll &amp;&amp; cd ..

deploy:
   provider: pages
   skip-cleanup: true
   github-token: $GH_TOKEN
   keep-history: true
   local_dir: _result/html
   on:
branch: master</code></pre><figcaption></figcaption></figure>

<ol><li>Generate a token on Github and add it as an environement variable named <code>GH_TOKEN</code> in Travis (screenshot or link)</li>
</ol>
<p>
For example, on your project Settings in Travis, you have a menu labelled <strong>Environment variables</strong>
where you can add variables (those variables will be automatically encrypted).
</p>
<p>
<img src="settings.png" alt=""/>

</p>

  </section>

</article>

<footer>

<div class="footline">
    <div class="github-link">
      <a href="" target="blank"><i class="fa fa-code-fork"></i>Github</a>
    </div>
  </div>
</footer>

<script src="/Rapport-Pillar/_support/html/js/clipboard.min.js"></script>

<link href="/Rapport-Pillar/_support/html/css/featherlight.min.css" rel="stylesheet">
<script src="/Rapport-Pillar/_support/html/js/featherlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="/Rapport-Pillar/_support/html/js/flex.js"></script>
<!-- Prettify annotated paragraphs-->
    <script src="/Rapport-Pillar_support/html/js/annotated-paragraphs.js"></script>

  </body>
</html>
